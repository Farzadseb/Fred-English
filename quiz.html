<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz</title>
<style>
body{
font-family:tahoma;
background:#f2f2f7;
margin:0;
padding:20px;
display:flex;
flex-direction:column;
align-items:center
}
.card{
width:100%;
max-width:400px;
background:white;
border-radius:16px;
padding:20px;
margin-bottom:15px;
text-align:center
}
button{
width:100%;
padding:14px;
margin-top:10px;
border-radius:12px;
border:none;
font-size:16px;
cursor:pointer
}
.correct{background:#34c759;color:white}
.wrong{background:#ff3b30;color:white}
</style>
</head>

<body>

<div class="card">
<h2 id="question">...</h2>
<p id="sub"></p>
</div>

<div id="options" style="width:100%;max-width:400px"></div>

<script src="a1-words.js"></script>
<script>
let index=0, score=0;
const mode=localStorage.getItem('quizMode');
const words=window.words;

function show(){
if(index>=10){
alert("پایان آزمون\nامتیاز: "+score+"/10");
location.href="index.html";
return;
}

const q=words[Math.floor(Math.random()*words.length)];

let question="", answer="", optionKey="";

if(mode==="fa-en"){
question=q.translation;
answer=q.word;
optionKey="word";
document.getElementById("sub").innerText="معادل انگلیسی را انتخاب کنید";
}
else if(mode==="en-fa"){
question=q.word;
answer=q.translation;
optionKey="translation";
document.getElementById("sub").innerText="معادل فارسی را انتخاب کنید";
}
else if(mode==="word-def"){
question=q.word;
answer=q.definition;
optionKey="definition";
document.getElementById("sub").innerText="تعریف صحیح را انتخاب کنید";
}
else if(mode==="def-word"){
question=q.definition;
answer=q.word;
optionKey="word";
document.getElementById("sub").innerText="این تعریف مربوط به کدام کلمه است؟";
}

document.getElementById("question").innerText=question;

let opts=[answer];
while(opts.length<4){
const r=words[Math.floor(Math.random()*words.length)];
const v=r[optionKey];
if(v && !opts.includes(v)) opts.push(v);
}
opts.sort(()=>Math.random()-0.5);

const box=document.getElementById("options");
box.innerHTML="";
opts.forEach(o=>{
const b=document.createElement("button");
b.innerText=o;
b.onclick=()=>{
document.querySelectorAll("button").forEach(x=>x.disabled=true);
if(o===answer){b.className="correct";score++}
else b.className="wrong";
setTimeout(()=>{index++;show()},800);
};
box.appendChild(b);
});
}

show();
</script>
</body>
</html>
