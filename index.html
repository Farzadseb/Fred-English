<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English with Fred</title>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icon-192x192.png">
</head>

<body class="dark-theme">

<!-- LOGIN -->
<div id="login" class="view active">
    <div class="login-container">
        <div class="login-header">
            <h1><i class="fas fa-user-graduate"></i> English with Fred</h1>
            <p>برای شروع، لطفاً نام خود را وارد کنید</p>
        </div>

        <div class="login-form">
            <div class="input-group">
                <i class="fas fa-user"></i>
                <input type="text" id="usernameInput" placeholder="نام شما" maxlength="20">
            </div>

            <div class="input-group">
                <i class="fas fa-id-card"></i>
                <input type="text" id="studentCode" placeholder="کد زبان‌آموز (اختیاری)" maxlength="10">
            </div>

            <button class="btn login-btn" onclick="saveUserInfo()">
                <i class="fas fa-play-circle"></i> شروع یادگیری
            </button>
        </div>
    </div>
</div>

<!-- HOME -->
<div id="home" class="view">
    <div class="top-bar">
        <button class="mute-btn" onclick="toggleGlobalMute()">
            <i class="fas fa-volume-up"></i>
        </button>

        <div class="user-info">
            <i class="fas fa-user-circle"></i>
            <span id="currentUsername">کاربر</span>
        </div>

        <button class="theme-btn" onclick="toggleTheme()">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <header class="app-header">
        <h1><i class="fas fa-graduation-cap"></i> English with Fred</h1>
        <div class="score-card">
            <div class="stars" id="starsContainer">
                <i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
                <i class="far fa-star"></i><i class="far fa-star"></i>
            </div>
            <div class="best-score">
                <i class="fas fa-trophy"></i>
                <span>بهترین امتیاز</span>
                <strong id="bestScore">0%</strong>
            </div>
        </div>
    </header>

    <main class="main-content">
        <div class="learning-banner" onclick="startA1Learning()">
            <div class="banner-icon"><i class="fas fa-book-open"></i></div>
            <div class="banner-content">
                <h3>یادگیری لغات A1</h3>
                <p>۲۰۰ لغت ضروری</p>
            </div>
            <div class="banner-arrow"><i class="fas fa-arrow-left"></i></div>
        </div>

        <div class="menu-grid">
            <button class="menu-btn gradient-blue" onclick="startQuiz('en-fa')">English → Persian</button>
            <button class="menu-btn gradient-blue" onclick="startQuiz('fa-en')">Persian → English</button>
            <button class="menu-btn gradient-green" onclick="startQuiz('word-def')">Word → Definition</button>
            <button class="menu-btn gradient-green" onclick="startQuiz('def-word')">Definition → Word</button>
            <button class="menu-btn gradient-orange" onclick="reviewMistakesPage()">مرور اشتباهات</button>
            <button class="menu-btn gradient-purple" onclick="showProgressReport()">گزارش پیشرفت</button>
            <button class="menu-btn gradient-whatsapp" onclick="joinWhatsApp()">واتساپ</button>
            <button class="menu-btn gradient-exit" onclick="showExitOptions()">خروج</button>
        </div>
    </main>
</div>

<!-- LEARNING / QUIZ / RESULTS / MISTAKES -->
<!-- بدون تغییر ساختاری، فقط CSS و JS کنترل می‌کنند -->

<script src="words.js"></script>
<script src="a1-words.js"></script>
<script src="quiz-engine.js"></script>
<script src="learning-engine.js"></script>
<script src="app.js"></script>

<script>
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js');
    });
}
</script>

</body>
</html>
