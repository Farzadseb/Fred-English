<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English With Fred - ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø²Ø¨Ø§Ù† Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“š</text></svg>">
</head>
<body>
    <!-- Ø¯Ú©Ù…Ù‡ ØªØºÛŒÛŒØ± ØªÙ… -->
    <button class="theme-toggle" onclick="toggleTheme()" title="ØªØºÛŒÛŒØ± ØªÙ…">
        ğŸŒ™
    </button>

    <div class="app-container">
        <!-- Ù‡Ø¯Ø± - 40% Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø¨Ø§ Ù„ÙˆÚ¯Ùˆ Ùˆ Ø¯Ú©Ù…Ù‡ Mute -->
        <div class="app-header">
            <div class="header-top">
                <!-- Ù„ÙˆÚ¯ÙˆÛŒ Ú©Ø§Ø±Ø¨Ø± -->
                <div class="logo-container">
                    <img src="logo.png" alt="English With Fred Logo" class="app-logo" 
                         onerror="this.style.display='none'; document.querySelector('.logo-fallback').style.display='flex';">
                    
                    <!-- Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù„ÙˆÚ¯Ùˆ -->
                    <div class="logo-fallback" style="display: none;">
                        <span class="logo-icon">ğŸ“š</span>
                        <h1>English With Fred</h1>
                    </div>
                </div>
                
                <!-- Ø¯Ú©Ù…Ù‡ Mute ÙØ¹Ø§Ù„ -->
                <button id="muteBtn" class="mute-toggle" onclick="toggleMute()" title="Ù…ÛŒÚ©Ø±ÙˆÙÙˆÙ†">
                    <span id="muteIcon">ğŸ¤</span>
                </button>
            </div>
            
            <div class="stars-container">
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
                <span class="star">â˜…</span>
            </div>
            
            <div class="score-display">
                Ø¨Ù‡ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²: <span id="bestScore">0</span>%
            </div>
        </div>

        <!-- Ø­Ø§Ù„Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† -->
        <div class="quiz-modes">
            <button class="mode-button" onclick="startQuiz('en-fa')">
                <span class="mode-icon">ğŸ‡ºğŸ‡¸â†’ğŸ‡®ğŸ‡·</span>
                <span class="mode-text">English â†’ Persian</span>
            </button>
            <button class="mode-button" onclick="startQuiz('fa-en')">
                <span class="mode-icon">ğŸ‡®ğŸ‡·â†’ğŸ‡ºğŸ‡¸</span>
                <span class="mode-text">Persian â†’ English</span>
            </button>
            <button class="mode-button" onclick="startQuiz('word-def')">
                <span class="mode-icon">ğŸ“</span>
                <span class="mode-text">Word â†’ Definition</span>
            </button>
            <button class="mode-button" onclick="startQuiz('def-word')">
                <span class="mode-icon">ğŸ’­</span>
                <span class="mode-text">Definition â†’ Word</span>
            </button>
        </div>

        <!-- Ú©ÙˆÛŒÛŒØ² Ú©Ø§Ù†ØªÛŒÙ†Ø± -->
        <div id="quizContainer" class="quiz-container">
            <div id="questionText" class="question-text">
                Ø³ÙˆØ§Ù„ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...
            </div>
            
            <div id="optionsContainer" class="options-container">
                <!-- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            
            <div class="controls-container">
                <button id="speakBtn" class="control-button" onclick="speakCurrentWord()">
                    ğŸ”Š ØªÙ„ÙØ¸
                </button>
                <button id="hintBtn" class="control-button" onclick="showHint()">
                    ğŸ’¡ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ
                </button>
                <button id="nextBtn" class="control-button" onclick="nextQuestion()" style="display: none;">
                    â­ï¸ Ø¨Ø¹Ø¯ÛŒ
                </button>
                <button id="endQuizBtn" class="control-button" onclick="endQuiz()" style="display: none;">
                    â¹ï¸ Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ†
                </button>
            </div>
        </div>

        <!-- Ú©Ø§Ø¯Ø± Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª -->
        <div id="progressReport" class="progress-report-container">
            <div class="progress-header">
                <h3>ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª</h3>
                <button onclick="hideProgressReport()">âœ•</button>
            </div>
            <div id="progressContent">
                <!-- Ù…Ø­ØªÙˆØ§ÛŒ Ú¯Ø²Ø§Ø±Ø´ Ø§ÛŒÙ†Ø¬Ø§ Ù„ÙˆØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                <p>Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú¯Ø²Ø§Ø±Ø´...</p>
            </div>
        </div>

        <!-- ÙÙˆØªØªØ± -->
        <div class="app-footer">
            <button class="footer-button" onclick="reviewSmartMistakes()">
                ğŸ”„ Ù…Ø±ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡Ø§Øª Ù‡ÙˆØ´Ù…Ù†Ø¯
            </button>
            <button class="footer-button" onclick="showProgressReport()">
                ğŸ“ˆ Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª
            </button>
            <button class="footer-button" onclick="registerWhatsApp()">
                ğŸ“± Ø«Ø¨Øª Ù†Ø§Ù… Ø¯Ø± ÙˆØ§ØªØ³Ø§Ù¾
            </button>
            <button class="footer-button" onclick="exitApp()">
                ğŸšª Ø®Ø±ÙˆØ¬ Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡
            </button>
        </div>
    </div>

    <!-- Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ -->
    <script src="words.js"></script>
    <script src="pwa.js"></script>
    <script src="speech.js"></script>
    <script src="quiz.js"></script>
    <script src="progress.js"></script>
    <script src="app.js"></script>
    
    <script>
        // ØªØ³Øª Ø§ÙˆÙ„ÛŒÙ‡
        console.log('=== English With Fred Loaded ===');
        console.log('words loaded:', typeof words !== 'undefined' ? 'âœ…' : 'âŒ');
        console.log('startQuiz function:', typeof startQuiz !== 'undefined' ? 'âœ…' : 'âŒ');
        console.log('Quiz modes count:', document.querySelectorAll('.mode-button').length);
        
        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÙˆÚ¯Ùˆ fallback Ø§Ú¯Ø± Ù„ÙˆÚ¯Ùˆ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª
        window.addEventListener('load', function() {
            setTimeout(() => {
                const logo = document.querySelector('.app-logo');
                const fallback = document.querySelector('.logo-fallback');
                if (logo && logo.naturalHeight === 0) {
                    logo.style.display = 'none';
                    if (fallback) fallback.style.display = 'flex';
                }
            }, 1000);
        });
    </script>
</body>
</html>
