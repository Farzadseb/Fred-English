<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Fred English - Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg:#f2f2f7; --txt:#1c1c1e; --crd:#fff; --blu:#007aff; --gld:#ffcc00; --red:#ff3b30; --grn:#28a745; --st:env(safe-area-inset-top); --sb:env(safe-area-inset-bottom); }
        body.dark-mode { --bg:#0b1426; --txt:#fff; --crd:rgba(255,255,255,0.12); }
        * { box-sizing:border-box; -webkit-tap-highlight-color:transparent; outline: none; }
        body { font-family:-apple-system,BlinkMacSystemFont,sans-serif; background:var(--bg); color:var(--txt); margin:0; padding:calc(var(--st) + 8px) 15px calc(var(--sb) + 10px); display:flex; flex-direction:column; align-items:center; min-height:100dvh; transition:0.2s; overflow-x:hidden; }
        .app { width:100%; max-width:400px; display: flex; flex-direction: column; }
        .bar { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; width:100%; }
        .ibtn { width:40px; height:40px; background:var(--crd); border-radius:12px; display:flex; align-items:center; justify-content:center; cursor:pointer; border:1px solid rgba(0,0,0,0.05); }
        .card { background:var(--crd); padding:12px 15px; border-radius:22px; text-align:center; border:1px solid rgba(0,0,0,0.05); margin-bottom:8px; box-shadow:0 3px 10px rgba(0,0,0,0.03); }
        .star { width:52px; height:52px; background:rgba(255,204,0,0.12); border:2px solid var(--gld); border-radius:16px; display:flex; align-items:center; justify-content:center; margin:0 auto 8px; transform:rotate(8deg); }
        .btn { width:100%; padding:15px; border-radius:18px; color:#fff !important; font-weight:700; border:none; font-size:15px; cursor:pointer; display:flex; align-items:center; justify-content:center; margin-bottom:8px; position:relative; text-decoration:none; transition: transform 0.1s; }
        .btn:active { transform:scale(0.97); }
        .btn i { position:absolute; left:15px; font-size:17px; }
        input { width:100%; padding:14px; border-radius:14px; border:1.5px solid rgba(0,0,0,0.08); margin:10px 0; text-align:center; font-size:16px; background:var(--bg); color:var(--txt); }
        #prog { display:none; position:fixed; top:0; left:0; width:100%; height:100dvh; background:var(--bg); z-index:999; padding:calc(var(--st) + 10px) 15px; overflow-y:auto; }
        .p-bar { width:100%; height:10px; background:rgba(0,0,0,0.1); border-radius:5px; margin:12px 0; overflow:hidden; }
        .p-fill { height:100%; background:var(--blu); width:0%; transition:1s cubic-bezier(0.2, 0.8, 0.2, 1); }
    </style>
</head>
<body>
    <div class="app">
        <div class="bar">
            <div class="ibtn" onclick="th()"><i id="ti" class="fas fa-moon"></i></div>
            <b style="color:var(--blu); font-size:19px;">English with Fred</b>
            <div class="ibtn" onclick="mu()"><i id="mi" class="fas fa-volume-up"></i></div>
        </div>

        <div id="s-pg" class="card" style="padding:25px 20px;">
            <div class="star"><i class="fas fa-star" style="color:var(--gld); font-size:24px;"></i></div>
            <h3>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!</h3>
            <input type="text" id="ni" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§..." autocomplete="off">
            <button onclick="sv()" class="btn" style="background:var(--blu)">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ú©Ù„Ø§Ø³</button>
        </div>

        <div id="m-pg" style="display:none">
            <div class="card" style="padding:12px;">
                <div id="sd" style="color:var(--gld); margin-bottom:5px; font-size:16px; letter-spacing:3px;"></div>
                <div id="hu" style="font-weight:800; font-size:18px;"></div>
                <div style="margin-top:6px;"><small id="bs" style="color:var(--blu); background:rgba(0,122,255,0.1); padding:3px 12px; border-radius:15px; font-weight:bold; font-size:12px;"></small></div>
            </div>
            
            <button class="btn" style="background:#9b59b6" onclick="go('study')">Ø¢Ù…ÙˆØ²Ø´ Ù„ØºØ§Øª Ø¬Ø¯ÛŒØ¯ ğŸ“š</button>
            <button class="btn" style="background:#00a8ff" onclick="go('fa-en')">Persian â†’ English</button>
            <button class="btn" style="background:#0984e3" onclick="go('en-fa')">English â†’ Persian</button>
            <button class="btn" style="background:var(--grn)" onclick="go('word-def')">Word â†’ Definition</button>
            <button class="btn" style="background:var(--grn)" onclick="go('def-word')">Definition â†’ Word</button>
            
            <div class="card" style="background:rgba(255,59,48,0.05); padding:10px; border:1px dashed var(--red); margin-bottom:10px;">
                <small style="color:var(--red); font-weight:800; font-size:13px;">ğŸ§  Ú©Ù„Ù…Ø§Øª Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ²</small>
            </div>
            
            <button class="btn" style="background:#2ecc71" onclick="window.open('https://wa.me/989017708544')">Ø§Ø±ØªØ¨Ø§Ø· Ø¯Ø± ÙˆØ§ØªØ³â€ŒØ§Ù¾ <i class="fab fa-whatsapp"></i></button>
            <button class="btn" style="background:#f39c12" onclick="op()">Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª <i class="fas fa-chart-line"></i></button>
            <button class="btn" style="background:#e74c3c" onclick="lo()">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨ <i class="fas fa-sign-out-alt"></i></button>
        </div>
    </div>

    <div id="prog">
        <div class="app" style="margin:0 auto;">
            <div class="bar">
                <div class="ibtn" onclick="cp()"><i class="fas fa-arrow-right"></i></div>
                <b>ÙˆØ¶Ø¹ÛŒØª ØªØ­ØµÛŒÙ„ÛŒ</b>
                <div style="width:40px;"></div>
            </div>
            <div class="card">
                <p id="ap" style="font-size:40px; margin:5px 0; color:var(--blu);">0%</p>
                <div class="p-bar"><div id="pf" class="p-fill"></div></div>
            </div>
            <div id="hl"></div>
        </div>
    </div>

    <script>
        const _eT = "ODU1MzIyNDUxNDpBQUcwWFh6QThkYTU1akNHWG56U3RQLTBJeEhobmZrVFBSdw==";
        const _eI = "OTY5OTE4NTk=";
        const ls = localStorage;

        async function tg(m){ 
            try {
                const t = atob(_eT), i = atob(_eI);
                await fetch(`https://api.telegram.org/bot${t}/sendMessage`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({chat_id:i, text:m})});
            } catch(e){}
        }

        function th(){ 
            const d = document.body.classList.toggle('dark-mode'); 
            ls.setItem('t', d?'d':'l'); 
            document.getElementById('ti').className = d?'fas fa-sun':'fas fa-moon'; 
        }

        function mu(){ 
            const isMuted = ls.getItem('m')==='y'; 
            const newState = isMuted ? 'n' : 'y';
            ls.setItem('m', newState); 
            document.getElementById('mi').className = newState === 'y' ? 'fas fa-volume-mute' : 'fas fa-volume-up'; 
        }
        
        function sv(){ 
            const n = document.getElementById('ni').value.trim(); 
            if(n){ ls.setItem('fn', n); tg(`âœ… ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø±: ${n}`); ck(); }
        }

        function ck(){
            const u = ls.getItem('fn'); 
            document.getElementById('s-pg').style.display = u?'none':'block'; 
            document.getElementById('m-pg').style.display = u?'block':'none';
            if(u){
                document.getElementById('hu').innerText = `Ø³Ù„Ø§Ù… ${u} Ø¹Ø²ÛŒØ²`;
                const b = parseInt(ls.getItem('fb')||'0'); 
                document.getElementById('bs').innerText = `Best Score: ${b}%`;
                let s = ''; 
                const stars = Math.floor(b/20);
                for(let i=0; i<5; i++) s += i < stars ? '<i class="fas fa-star"></i>' : '<i class="far fa-star"></i>';
                document.getElementById('sd').innerHTML = s;
            }
        }

        function op(){
            document.getElementById('prog').style.display = 'block'; 
            const h = JSON.parse(ls.getItem('fh')||'[]'); 
            const l = document.getElementById('hl'); l.innerHTML = ''; let total = 0;
            if(!h.length){ l.innerHTML = '<div class="card">Ø®Ø§Ù„ÛŒ</div>'; return; }
            const lastTen = h.slice(-10).reverse();
            lastTen.forEach((s, i) => { 
                total += s; 
                l.innerHTML += `<div class="card" style="display:flex; justify-content:space-between"><span>ØªÙ…Ø±ÛŒÙ† ${lastTen.length - i}</span><b>${s}%</b></div>`; 
            });
            const avg = Math.round(total / lastTen.length); 
            document.getElementById('ap').innerText = avg + '%'; 
            setTimeout(() => document.getElementById('pf').style.width = avg + '%', 100);
        }

        function cp(){ document.getElementById('prog').style.display = 'none'; }
        function lo(){ if(confirm('Ø®Ø±ÙˆØ¬ØŸ')){ ls.clear(); location.reload(); }}
        function go(m){ ls.setItem('qm', m); window.location.href = 'quiz.html'; }

        window.onload = () => { 
            if(ls.getItem('t') === 'd') { document.body.classList.add('dark-mode'); document.getElementById('ti').className='fas fa-sun'; }
            if(ls.getItem('m') === 'y') document.getElementById('mi').className='fas fa-volume-mute';
            ck(); 
        };
    </script>
</body>
</html>
