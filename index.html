<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>English with Fred</title>

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

    <!-- Style -->
    <link rel="stylesheet" href="style.css">
</head>

<body class="dark-theme">

<!-- Notification -->
<div id="notification" class="notification"></div>

<!-- Install Banner -->
<div id="installBanner" class="install-banner"></div>

<!-- LOGIN -->
<section id="login" class="view active">
    <div class="card center">
        <h2>English with Fred</h2>
        <input id="usernameInput" type="text" placeholder="ูุงู" />
        <input id="studentCodeInput" type="text" placeholder="ฺฉุฏ ุฒุจุงูโุขููุฒ (ุงุฎุชุงุฑ)" />
        <button class="menu-btn primary" onclick="saveUserInfo()">ูุฑูุฏ</button>
    </div>
</section>

<!-- HOME -->
<section id="home" class="view">
    <header class="top-bar">
        <span>ุณูุงู <strong id="currentUsername"></strong> ๐</span>
        <div class="top-actions">
            <button class="icon-btn theme-btn"><i class="fas fa-sun"></i></button>
            <button class="icon-btn mute-btn"><i class="fas fa-volume-up"></i></button>
        </div>
    </header>

    <div class="stats">
        <div class="stars">
            <i class="far fa-star"></i><i class="far fa-star"></i>
            <i class="far fa-star"></i><i class="far fa-star"></i>
            <i class="far fa-star"></i>
        </div>
        <div>ุจูุชุฑู ุงูุชุงุฒ: <span id="bestScore">0%</span></div>
    </div>

    <div class="menu-grid">
        <button class="menu-btn" onclick="startQuiz('english-persian',10)">
            <i class="fas fa-language"></i>
            <span>ุงูฺฏูุณ โ ูุงุฑุณ</span>
        </button>

        <button class="menu-btn" onclick="startQuiz('persian-english',10)">
            <i class="fas fa-exchange-alt"></i>
            <span>ูุงุฑุณ โ ุงูฺฏูุณ</span>
        </button>

        <button class="menu-btn" onclick="startQuiz('word-definition',10)">
            <i class="fas fa-book"></i>
            <span>ฺฉููู โ ุชุนุฑู</span>
        </button>

        <button class="menu-btn" onclick="startQuiz('definition-word',10)">
            <i class="fas fa-lightbulb"></i>
            <span>ุชุนุฑู โ ฺฉููู</span>
        </button>

        <button class="menu-btn" onclick="showProgressReport()">
            <i class="fas fa-chart-line"></i>
            <span>ฺฏุฒุงุฑุด ูพุดุฑูุช</span>
        </button>

        <!-- ADMIN ONLY -->
        <button id="adminClearCacheBtn"
                class="menu-btn danger"
                style="display:none"
                onclick="adminClearCache()">
            ๐งน ูพุงฺฉโุณุงุฒ ฺฉุด (ุงุฏูู)
        </button>

        <button class="menu-btn gradient-telegram" onclick="showExitOptions()">
            <i class="fas fa-sign-out-alt"></i>
            <span>ุฎุฑูุฌ</span>
        </button>
    </div>
</section>

<!-- QUIZ -->
<section id="quiz" class="view">
    <header class="top-bar">
        <span id="quizUsername"></span>
        <button class="icon-btn" onclick="confirmExitQuiz()">
            <i class="fas fa-times"></i>
        </button>
    </header>

    <div class="progress-bar">
        <div id="progressFill" class="progress-fill"></div>
    </div>

    <div class="quiz-card">
        <div id="questionText" class="question"></div>
        <div id="quizOptions" class="options"></div>
        <div class="quiz-info">
            <span>ุณูุงู <b id="currentQuestion">1</b>/<span id="totalQuestions">10</span></span>
            <span>ุงูุชุงุฒ: <b id="quizScore">0</b></span>
        </div>
    </div>
</section>

<!-- RESULT -->
<section id="results" class="view">
    <div class="card center">
        <h2>ูุชุฌู ุขุฒููู</h2>
        <p>ุงูุชุงุฒ: <strong id="finalScore"></strong></p>
        <p>ุฏุฑุณุช: <span id="correctCount"></span> / <span id="totalCount"></span></p>
        <p id="motivationMsg"></p>
        <button class="menu-btn primary" onclick="switchView('home')">ุจุงุฒฺฏุดุช</button>
    </div>
</section>

<!-- Scripts -->
<script src="a1-words.js"></script>
<script src="telegram-integration.js"></script>
<script src="quiz-engine.js"></script>
<script src="app.js"></script>
<script src="install-promotion.js"></script>

<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
